---
import BaseLayout from "../layouts/BaseLayout.astro";
import BentoCard from "../components/BentoCard.astro";
import { getCollection, type CollectionEntry } from "astro:content";

// Fetch all links and sort by 'order'
const links = (await getCollection("links")).sort(
  (a: CollectionEntry<"links">, b: CollectionEntry<"links">) =>
    a.data.order - b.data.order,
);
---

<BaseLayout title="Robgrappler's | Digital Garden">
  <div class="mx-auto min-h-screen max-w-7xl px-4 py-8 sm:px-6 lg:px-8">
    <header class="mb-12 flex flex-col gap-2">
      <span
        class="font-sans text-xs font-bold uppercase tracking-[0.2em] text-sub-grey"
      >
        Digital Matroom v2.0
      </span>
      <h1
        class="font-b612 text-5xl font-black tracking-tight text-white sm:text-7xl"
      >
        Robgrappler's
      </h1>
      <p class="max-w-xl font-sans text-lg text-sub-paper/80">
        Grappling, Tech and Digital Archiving. (Work in Progress)
      </p>
    </header>

    <main class="grid grid-cols-1 gap-4 md:grid-cols-3 md:auto-rows-[180px]">
      {links.map((link: CollectionEntry<"links">) => <BentoCard link={link} />)}
    </main>

    <footer
      class="mt-20 border-t border-main-surface pt-8 text-center sm:text-left"
    >
      <p class="font-sans text-xs text-sub-grey uppercase tracking-widest">
        Â© {new Date().getFullYear()} Robgrappler. All rights reserved.
      </p>
    </footer>
  </div>
</BaseLayout>
