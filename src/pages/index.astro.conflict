---
import BaseLayout from "../layouts/BaseLayout.astro";
import BentoCard from "../components/BentoCard.astro";
import { getCollection, type CollectionEntry } from "astro:content";

// Fetch all links and sort by 'order'
const links = (await getCollection("links")).sort(
  (a: CollectionEntry<"links">, b: CollectionEntry<"links">) =>
    a.data.order - b.data.order,
);
---

<<<<<<< Updated upstream
<BaseLayout title="Robgrappler's | Digital Garden">
  <div class="mx-auto min-h-screen max-w-7xl px-4 py-8 sm:px-6 lg:px-8">
    <header class="mb-12 flex flex-col gap-2">
      <span
        class="font-sans text-xs font-bold uppercase tracking-[0.2em] text-sub-grey"
      >
        Digital Matroom v2.0
      </span>
      <h1
        class="font-b612 text-5xl font-black tracking-tight text-white sm:text-7xl"
      >
        Robgrappler's
      </h1>
      <p class="max-w-xl font-sans text-lg text-sub-paper/80">
        Grappling, Tech and Digital Archiving. (Work in Progress)
      </p>
    </header>
=======
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>HUB | Robgrappler</title>
    <!-- Analytics placeholder: add here if needed -->
  </head>
  <body
    class="bg-zinc-950 text-zinc-100 antialiased selection:bg-zinc-800 selection:text-zinc-200"
  >
    <main class="min-h-screen px-6 py-10 relative overflow-hidden">
      <!-- Background Mood (Header Only) -->
      <div
        class="absolute top-0 left-0 w-full h-[500px] pointer-events-none z-0 overflow-hidden"
      >
        <!-- Main Image with Contrast and Blur control -->
        <div
          class="absolute inset-0 bg-[url('/assets/bg/hub-header-texture.jpg')] bg-cover bg-center opacity-[0.08] mix-blend-overlay filter contrast-[0.85] blur-[0.5px]"
        >
        </div>

        <!-- Focal Point Reduction (Right-side weight reduction) -->
        <div
          class="absolute inset-0 bg-gradient-to-r from-transparent via-transparent to-zinc-950/20"
        >
        </div>

        <!-- Layer Unification (Subtle Noise Overlay) -->
        <div
          class="absolute inset-0 opacity-[0.03] mix-blend-soft-light pointer-events-none"
          style="background-image: url('data:image/svg+xml,%3Csvg viewBox=%220 0 200 200%22 xmlns=%22http://www.w3.org/2000/svg%22%3E%3Cfilter id=%22noiseFilter%22%3E%3CfeTurbulence type=%22fractalNoise%22 baseFrequency=%220.65%22 numOctaves=%223%22 stitchTiles=%22stitch%22/%3E%3C/filter%3E%3Crect width=%22100%25%22 height=%22100%25%22 filter=%22url(%23noiseFilter)%22/%3E%3C/svg%3E');"
        >
        </div>

        <!-- Color Temperature Alignment (Cool Charcoal) -->
        <div class="absolute inset-0 bg-zinc-900/10 mix-blend-multiply"></div>

        <!-- Bottom Fade -->
        <div
          class="absolute inset-0 bg-gradient-to-b from-transparent via-zinc-950/50 to-zinc-950"
        >
        </div>
      </div>
>>>>>>> Stashed changes

    <main class="grid grid-cols-1 gap-4 md:grid-cols-3 md:auto-rows-[180px]">
      {links.map((link: CollectionEntry<"links">) => <BentoCard link={link} />)}
    </main>

    <footer
      class="mt-20 border-t border-main-surface pt-8 text-center sm:text-left"
    >
      <p class="font-sans text-xs text-sub-grey uppercase tracking-widest">
        Â© {new Date().getFullYear()} Robgrappler. All rights reserved.
      </p>
    </footer>
  </div>
</BaseLayout>
